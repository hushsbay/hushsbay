<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <link id=favicon href="/img/hushsbay.png" rel="shortcut icon" type="image/x-icon"/>
        <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
        <title>Sendjay</title>
        <link rel="stylesheet" href="/plugin/jquery-ui-smoothness-1.12.1.min.css">
        <link rel="stylesheet" href="/common/common.css">
        <style>            
            @media screen and (max-device-width: 500px) { /* 모바일기기중 width가 그리 크지 않는 경우 화면이 좁아 보이므로 폰트 줄이기 */
                .mq_title { font-size:12px }
                .mq_node { font-size:12px }
                .mq_text { font-size:10px }
                input { font-size:12px }
            } /* .css내 넣으면 안먹힘 */
            @media screen and (min-device-width: 501px) {
                .mq_title { font-size:16px }
                .mq_node { font-size:14px }
                .mq_text { font-size:14px }                
                input { font-size:12px }
            }
            .mem { display:flex;flex-direction:column;background-color:#fdf5f6;border:1px solid lightgray;overflow:auto;padding-top:4px;margin:4px 4px 0px 4px }
            .memNm { height:20px;font-size:12px;color:#005192;cursor:pointer;margin-left:3px }
            .memTeam { height:20px;font-size:12px;cursor:pointer;margin-left:3px }
            .memSel { background:#b2e2f8 }
            .picBtn { height:30px;display:flex;align-items:center;background:#0082AD;color:white;border-radius:5px;padding:0px 5px }
        </style>
        <script src="/plugin/jquery-3.4.1.min.js"></script>
        <script src="/plugin/jquery-ui-smoothness-1.12.1.min.js"></script>
        <script src="/plugin/jquery.cookie.js"></script>
        <script src="https://cdn.socket.io/4.7.3/socket.io.min.js" integrity="sha384-+miq58Ltmjm+SSP5g8Ok6dpMO/6R4n8xe/x1Yj0Bdb9kiEz25LTnWv/GZQTRQamg" crossorigin="anonymous"></script>
        <script>
            $.when($.ready).done(async function() {
                try { //By default, $.getScript() sets the cache setting to false. You can override this with $.ajaxSetup({ cache: true })
                    await $.getScript("/common/common.js")
                    await $.getScript("main_common.js")
                    const param = hush.http.getParamsFromLocation()
                    hush.webview.chk(param)
                    g_list = $("#list_chat")
                    g_year = (new Date()).getFullYear().toString()
                    g_nodeIndent = hush.webview.on ? 15 : 30
                    g_win_type = param.get("type") //invite, member, org 또는 빈값
                    if (hush.webview.on) {
                        if (!g_win_type) { //메인은 모바일앱에서도 마찬가지로 빈값
                            //$("#in_search").width(80)
                            //$("#btn_collapseall").hide()
                            //$("#btn_expandall").hide()
                        } else {
                            $("#in_search").width(150)
                            $("#btn_collapseall").show()
                            $("#btn_expandall").show()
                        }
                        //$("#btn_reset_auth").hide()
                        //$("#selected_people").width(100)
                        $("#btn_refresh").show()
                        $("#btn_logout").show()
                        //const _warn = "모바일웹은 지원되지 않습니다. 앱을 설치하시기 바랍니다."
                        if (hush.webview.ios) {
                            //아직 미개발
                        } else if (hush.webview.and) {
                            try {
                                if (!g_win_type) { 
                                    AndroidMain.procAfterOpenMain()
                                } else {
                                    AndroidPopup.procAfterOpenPopup()
                                }
                            } catch (exAnd) {
                                hushj.msg.alert("모바일웹은 지원되지 않습니다.<br>앱을 설치하시기 바랍니다.", {  
                                    "설치페이지로 이동": function() { 
                                        hushj.msg.close() 
                                        location.replace("/jquery/appdown.html?nocache=" + Math.random())
                                    }, "닫기": function() { 
                                        hushj.msg.close()
                                    } 
                                })
                            }
                        } else {
                            hush.msg.alert("Android/iOS만 지원됩니다.")
                            return
                        }
                    } else {
                        $("#in_search").width(150)
                        $("#btn_collapseall").show()
                        $("#btn_expandall").show()
                        $("#btn_reset_auth").show()
                    }
                    hush.webview.ready = true
                    debugger
                    //main.html은 아래 5군데에서 호출됨
                    //1) 메인으로서 onLoad 2) invite button from chat.html (invite) 3) newchat button from Chat Tab (member) 4) onRegistering Userid (org)?? 5) Selecting organization code
                    if (g_win_type) {
                        $("#fr_header_bar").hide()
                        $("#fr_header_tab").hide()
                        $(".chat").hide()
                        $(".setting").show()
                        if (!hush.webview.on) {
                            if (g_win_type == "org") {
                                document.title = "조직도 선택"
                            } else {
                                document.title = "임직원 선택"
                            }
                            g_userid = opener.g_userid
                            g_usernm = opener.g_usernm
                            g_orgcd = opener.g_orgcd
                            procMenuTop(BTN_MODE_PEOPLE, BTN_PEOPLE_COMPANY)
                        }
                    } else {
                        const result = await initMain(param.get("launch"), param.get("winid")) //mobile app에서는 바로 return true
                        if (!result) return
                        $(".coNav").on("click", function() { procMenuTop(this.id) })
                        $("#btn_team, #btn_company").on("click", function() {
                            hushj.util.animCall(this.id, true)
                            procMenuPeople(this.id) 
                        })
                        $("#btn_new").on("click", function() { 
                            hushj.util.animCall(this.id, true)
                            if (g_mode == BTN_MODE_PEOPLE) {
                                const mem = $(".mem")
                                if (mem.length == 0) {
                                    hushj.msg.toast(hush.cons.msg.row_not_selected)
                                    return
                                }
                                if (!hush.webview.on) {
                                    hush.room.create(hushj.cons.chat, "newFromMain", g_token10)
                                } else {
                                    const useridArr = []
                                    for (let item of mem) {
                                        const id = $(item).attr("id") //add_xxx
                                        useridArr.push(id.substring(4))
                                    }
                                    procNewChat(useridArr)                          
                                }
                            } else {
                                let urlStr = hushj.cons.main + "?type=member"
                                if (!hush.webview.on) {
                                    g_memWin = hush.util.openWinPop(urlStr, 740, 650)
                                } else {
                                    if (hush.webview.ios) {
                                    } else if (hush.webview.and) {
                                        urlStr += "&" + param_webview_and
                                        AndroidMain.openPopup(urlStr, "")
                                    }
                                }
                            }
                        })
                        $("#btn_me").on("click", async function() {
                            hushj.util.animCall(this.id, true)
                            if (!hush.webview.on) {
                                hush.room.create(hushj.cons.chat, "me", g_token10)
                            } else {
                                const new_roomid = hush.util.createId(g_token10)
                                const rq = { masterid : g_userid, masternm : g_usernm, userids : [g_userid] }
                                if (hush.webview.ios) {
                                } else if (hush.webview.and) { 
                                    AndroidMain.openRoom("newFromMain", new_roomid, "", JSON.stringify(rq))
                                }
                            }
                        })
                        $("#btn_noti").on("click", function() { 
                            hushj.util.animCall(this.id, true)
                            const checked = $(".chkbox_portal:checked")
                            if (checked.length == 0) {
                                hushj.msg.toast(hush.cons.msg.row_not_selected)
                                return
                            }
                            checked.each(function(idx, item) {
                                const _roomid = item.id.substring(4)
                                const _toggle = ($("#alarm_" + _roomid).css("display") == "none") ? "X" : ""
                                const rq = { kind : "noti", value : _toggle, userid : g_userid, roomid : _roomid }
                                if (hush.webview.ios) {
                                } else if (hush.webview.and) { 
                                    AndroidCom.send(hush.cons.sock_ev_set_env, JSON.stringify(rq), "parent", null, false) //procMsg=false
                                } else {
                                    hush.sock.send(hush.socket, hush.cons.sock_ev_set_env, rq, "parent")
                                }
                            })
                        })
                        $("#btn_read").on("click", function() { 
                            hushj.util.animCall(this.id, true)
                            const checked = $(".chkbox_portal:checked")
                            if (checked.length == 0) {
                                hushj.msg.toast(hush.cons.msg.row_not_selected)
                                return
                            }
                            checked.each(function(idx, item) {
                                const _roomid = item.id.substring(4)
                                const rq = { type : "updateall", senderkey : g_userkey, receiverid : g_userid, roomid : _roomid, first_queried : "Y" }
                                if (hush.webview.ios) {
                                } else if (hush.webview.and) { 
                                    AndroidCom.send(hush.cons.sock_ev_read_msg, JSON.stringify(rq), _roomid, "parent", false) //procMsg=false
                                } else {
                                    hush.sock.send(hush.socket, hush.cons.sock_ev_read_msg, rq, _roomid, "parent")
                                }
                            })
                        })
                        $("#btn_exit").on("click", function() { 
                            //There might be a certain possibility 'leave' message cannot be reached to room members if every member don't open chat room at all after server restart.
                            //Since when every member don't open chat room, no one can't be joined to that room, so real-time 'leave' message won't be delivered.
                            //work-around => calling hush.cons.sock_ev_open_room before hush.cons.sock_ev_send_msg with 'leave' on response for sock_ev_open_room ("before_leave" below)
                            //서버 리스타트후 바로 목록에서 나가기 할 경우 롬조인이 안되서 다른 멤버들에게 전달이 안될 수 있는데 먼저 sock_ev_open_room을 호출하여 처리하면 됨. ("before_leave" below)
                            hushj.util.animCall(this.id, true)
                            const checked = $(".chkbox_portal:checked")
                            if (checked.length == 0) {
                                hushj.msg.toast(hush.cons.msg.row_not_selected)
                                return
                            }
                            hushj.msg.alert("선택된 채팅방내 본인이 주고 받은 모든 톡이 삭제됩니다. 계속할까요??", { 
                                "Yes": function() {                                 
                                    checked.each(function(idx, item) {
                                        const _roomid = item.id.substring(4)
                                        const rq = { from : "before_leave", userid : g_userid } //"before_leave" is not practically used at server (just dummy)
                                        if (hush.webview.ios) {
                                        } else if (hush.webview.and) {
                                            AndroidCom.send(hush.cons.sock_ev_open_room, JSON.stringify(rq), _roomid, "parent", false) //procMsg=false
                                        } else {
                                            hush.sock.send(hush.socket, hush.cons.sock_ev_open_room, rq, _roomid, "parent")
                                        }
                                    })
                                    hushj.msg.close()
                                    $("#chk_selectall").prop("checked", false)
                                }, "No": function() { 
                                    hushj.msg.close()
                                } 
                            }, "Leave Room", 200)
                        })
                    }
                    $("#btn_refresh").on("click", function() { //mobile only
                        hushj.util.animCall(this.id, true)
                        AndroidMain.reload()
                    })
                    $("#btn_logout").on("click", function() { //mobile only
                        hushj.util.animCall(this.id, true)
                        hushj.msg.alert("로그아웃할까요?", { 
                            "Yes": function() {                                 
                                AndroidMain.logout()
                            }, "No": function() { 
                                hushj.msg.close()
                            } 
                        }, "Logout", 200)
                    })
                    $("#chk_selectall").on("change", function() { 
                        if (g_mode == BTN_MODE_PEOPLE) {
                            $(".chkbox_people").prop("checked", $(this).is(":checked"))
                            $(".chkbox_people").each(function(idx, item) {
                                if (g_mode_people == BTN_PEOPLE_COMPANY) {
                                    //checkbox(chk_selectall) hidden
                                } else {
                                    const _userid = item.id.substring(4)
                                    procSelect(_userid)
                                }                            
                            })
                        } else {
                            $(".chkbox_portal").prop("checked", $(this).is(":checked"))
                        }
                    })
                    $("#in_search").keyup(function(e) { if (e.keyCode === 13) procSearch() })
                    $("#btn_search").on("click", function() {
                        hushj.util.animCall(this.id, true)  
                        procSearch() 
                    })
                    $("#remove_selected_people").on("click", function() {
                        hushj.util.animCall(this.id, true)
                        $("#select_people_sub").empty()
                        $(".orgsel").prop("checked", false)
                        $(".orgsel").css("opacity", "1.0")
                        $(".chkbox_people").prop("checked", false)
                        $("#chk_selectall").prop("checked", false)                    
                        procMemPanel()
                    })
                    $("#pict_browse").on("click", function() {
                        hushj.util.animCall(this.id, true)
                        $("#file_upload").val("")
                        $("#file_upload").trigger("click")
                    })
                    $("#pict_upload").on("click", function() {
                        hushj.util.animCall(this.id, true)
                        const blobUrl = $("#img_pict").attr("src")
                        if (!blobUrl) {
                            hushj.msg.toast("Image file needed.")
                            return
                        }
                        const objUrl = hush.http.parseBlobUrl(blobUrl)
                        if (!objUrl) {
                            hushj.msg.toast("Mime type not found.")
                            return
                        }
                        const xhr = new XMLHttpRequest()
                        xhr.open("GET", blobUrl, true) //since blobUrl might be just blob without any infomation for base64 and contentType eg) blob:https://~
                        xhr.responseType = "blob"
                        xhr.onload = function(e) {
                            if (this.status == 200) {
                                const blob = this.response
                                const fd = new FormData()
                                fd.append("userid", g_userid)
                                fd.append("type", "U") //U(Update Picture), D(Delete Picture)
                                fd.append("mimetype", objUrl.mimetype)
                                fd.append("file", blob)
                                hushj.http.ajaxFormData(hush.cons.route + "/proc_picture", fd, (rs) => {
                                    hushj.msg.toast("Upload done.")
                                })
                            }
                        }
                        xhr.send()
                    })
                    $("#pict_delete").on("click", function() {
                        hushj.util.animCall(this.id, true)
                        const fd = new FormData()
                        fd.append("userid", g_userid)
                        fd.append("type", "D") //U(Update Picture), D(Delete Picture)
                        hushj.http.ajaxFormData(hush.cons.route + "/proc_picture", fd, (rs) => {
                            $("#img_pict").attr("src", hush.cons.img_noperson)
                            hushj.msg.toast("Delete done.")
                        })
                    })
                    $("#file_upload").change(function() {
                        try {
                            const file = this.files[0]
                            const obj = hush.util.getFileNameAndExtension(file.name)
                            if (obj.ext == "" || !hush.cons.sublink_ext_image.includes(obj.ext)) {
                                hushj.msg.alert("Image file needed. (" + hush.cons.sublink_ext_image + ")")
                                return
                            }
                            if (file.size > hush.cons.max_picture_size) {
                                hushj.msg.alert("File size up to " + hush.util.formatBytes(hush.cons.max_picture_size) + "(" + hush.cons.max_picture_size + "). Now is " + file.size + " bytes.")
                                return
                            }
                            const reader = new FileReader()
                            reader.readAsDataURL(file)
                            reader.addEventListener("load", function () {
                                $("#img_pict").attr("src", reader.result) //$("#img_pict").on("load", function() { $("#pict_upload").click() }).attr("src", reader.result)
                            }, false)
                        } catch (ex) { 
                            hush.util.showException(ex)
                        }
                    })
                    $("#btn_reset_auth").on("click", function() { //displays in Web Only
                        hushj.util.animCall(this.id, true)
                        hushj.msg.alert("You're going to reset authentication (including mobile). Continue?", { 
                            "Yes": async function() { 
                                try {
                                    const rq = { mode : "passkey", userid : g_userid }
                                    const rs = await hushj.http.ajax(hush.cons.route + "/proc_user", rq, "POST") //See in proc_user.js and login.js, too.
                                    if (rs.code != hush.cons.result_ok) {
                                        hushj.msg.alert(rs.msg)
                                        return
                                    }
                                    const dataObj = { userid : g_userid } //disconnect mobile socket
                                    hush.sock.send(hush.socket, hush.cons.sock_ev_cut_mobile, dataObj)
                                    hushj.msg.close()
                                } catch (ex) {
                                    hushj.msg.alert("btn_reset_auth: " + ex.message)
                                }
                            }, "No": function() { 
                                hushj.msg.close()
                            } 
                        }, "Reset Authentication", 200)
                    })
                    $("#in_nicknm,#in_job,#in_abcd,#in_abnm,#chk_standalone,#chk_notioff,#chk_soundoff,#in_fr,#in_to,#chk_bodyoff,#chk_senderoff").on("change", function() { 
                        g_setting_changed = true 
                    })   
                    $("#spn_clear").on("click", function() {  
                        hushj.util.animCall(this.id, true)
                        if ($("#in_fr").val().trim() != "") {
                            $("#in_fr").val("")
                            g_setting_changed = true 
                        }
                        if ($("#in_to").val().trim() != "") {
                            $("#in_to").val("")
                            g_setting_changed = true 
                        }
                    })
                    $("#btn_ok").on("click", async function() {
                        hushj.util.animCall(this.id, true)
                        try {
                            if (g_win_type == "invite") {
                                let useridArr = [], usernmArr = []
                                $(".mem").each(function(idx, item) { 
                                    const _userid = item.id.substring(4)
                                    useridArr.push(_userid) 
                                    usernmArr.push($("#addnm_" + _userid).html())
                                }).promise().done(function() {
                                    if (useridArr.length == 0) {
                                        hushj.msg.toast(hush.msg.need_one_row_selected)
                                        return
                                    } 
                                    if (!hush.webview.on) {
                                        opener.procInvite(useridArr, usernmArr)
                                        window.close()
                                    } else {
                                        AndroidPopup.invite(useridArr.join(hush.cons.deli), usernmArr.join(hush.cons.deli))
                                    }
                                })
                            } else if (g_win_type == "member") {
                                let useridArr = []
                                $(".mem").each(function(idx, item) { 
                                    const _userid = item.id.substring(4)
                                    useridArr.push(_userid)
                                }).promise().done(function() { 
                                    if (useridArr.length == 0) {
                                        hushj.msg.toast("No selection.")
                                        return
                                    } 
                                    if (!hush.webview.on) {
                                        opener.procNewChatFromPopup(useridArr)
                                        window.close()
                                    } else {
                                        AndroidPopup.invite(useridArr.join(hush.cons.deli), "")
                                    }
                                })
                            } else if (g_win_type == "org") {
                                let orgcd, orgnm, i = 0
                                $(".orgsel").each(function(idx) {
                                    if ($(this).prop("checked")) {
                                        const _id = this.id
                                        const _idx = _id.substring(7)
                                        orgcd = $("#orgrow_" + _idx).attr("orgcd")
                                        orgnm = $("#orgnm_" + _idx).html()
                                        i += 1
                                    }
                                }).promise().done(function() { 
                                    if (orgcd != "") {
                                        if (i > 1) {
                                            hushj.msg.alert("Single Select Only")
                                            return
                                        }
                                        opener.procOrgFromPopup(orgcd, orgnm)
                                        window.close()
                                    } else {
                                        hushj.msg.toast("None selected.")
                                    }
                                })
                            } else { //setting
                                if (!g_setting_changed) {
                                    hushj.msg.toast("Nothing changed.")
                                    return
                                }           
                                const overlay = hushj.msg.toast("saving..", false)
                                if (!procSetting("save")) return
                                setTimeout(() => { hushj.msg.toastEnd(overlay) }, 1000)
                                g_setting_changed = false
                            }
                        } catch (ex) {
                            hush.util.showException(ex)
                        }
                    })
                    $("#btn_cancel").on("click", function() {
                        hushj.util.animCall(this.id, true)
                        if (g_win_type) {
                            if (!hush.webview.on) {
                                window.close()
                            } else {
                                AndroidPopup.close()
                            }
                        } else {
                            if (!g_setting_changed) {
                                hushj.msg.toast("Nothing changed.")
                                return
                            }
                            procSetting("cancel")
                            procMenuTop(BTN_MODE_CHAT)
                            g_setting_changed = false
                        }
                    })
                    $("#btn_showlog").on("click", function() {
                        let num = $("#in_showlog").val()
                        num = parseInt(num) || 0
                        AndroidMain.showLog(num)
                    })
                    $("#btn_deletelog").on("click", function() {
                        AndroidMain.deleteLog()
                    })
                    $(window).bind("unload", function() { //$(window).unload(function() { deprecated as of 1.8
                        procUnload()
                        if (g_memWin && !g_memWin.closed) g_memWin.close()
                    })
                } catch (ex) {
                    hush.util.showEx(ex)
                }
            }).fail(function(ex) {
                hush.util.showEx(ex, hush.cons.failOnLoad)
            })        
        </script>
    </head>
    <body> 
        <div id=main_pg class=coMainPage>
            <div id=fr_header_bar style="height:50px;display:flex;justify-content:space-between;margin:0px 5px">
                <div style="width:80%;display:flex;align-items:center">
                    <img src="/img/sendjay_darkblue.png" style="width:40px;height:40px;margin-left:10px"/> 
                    <div id=header_title class="coDotDot mq_title" style="font-weight:bold;color:#005192;margin-left:10px">Sendjay</div>
                </div>
                <div style="display:flex;align-items:center;justify-content:flex-end;margin-right:8px">
                    <img id=img_disconn src="/img/disconnected.png" class=coImg24 style="display:none;margin-top:5px" /> <!--mobile-->
                    <img id=btn_refresh src="/img/refresh.png" class=coImg24 style="display:none;margin-left:8px" /> <!--mobile-->
                    <img id=btn_logout src="/img/logout.png" class=coImg24 style="display:none;margin-left:8px" /> <!--mobile-->
                </div>
            </div>
            <div id=fr_header_tab style="height:40px;display:flex;justify-content:center;margin:0px 5px">
                <div id=btn_people class=coNav><span class=mq_title>임직원</span></div>
                <div id=btn_chat class=coNav>
                    <span class=mq_title>채팅</span>
                    <span id=spn_unread style="display:none;font-size:12px;font-weight:normal;background-color:orange;color:white;border:1px solid yellow;border-radius:4px;padding:0px 1px;margin-left:5px">new</span>
                </div>
                <div id=btn_setting class=coNav style="border:1px"><span class=mq_title>환경설정</span></div>
            </div>
            <div id=fr_menu_top class=coMenuTop style="display:none">
                <input type=checkbox id=chk_selectall name=chk_selectall style="margin-left:10px" />
                <input id=in_search type=search spellcheck=false onsearch="OnSearch(this)" style="width:80px;height:24px;margin-left:8px" />
                <div id=btn_search class=coImgBtn><img src="/img/white_search.png" class=coImg24 /></div>
                <div id=btn_team class="coMenuBtn people" style="display:none"><img src="/img/white_team.png" class=coImgMenu /><span class=mq_text>내팀</span></div>            
                <div id=btn_company class="coMenuBtn people" style="display:none"><img src="/img/white_company.png" class=coImgMenu /><span class=mq_text>조직</span></div>
                <div id=btn_collapseall style="display:none;margin-left:10px"><img src="/img/minus.png" class=coImg32 /></div>
                <div id=btn_expandall style="display:none;margin-left:10px"><img src="/img/plus.png" class=coImg32 /></div>
            </div>
            <div id=fr_people class=coFrList style="display:none">
                <div id=list_people style="flex-grow:1;background-color:white;border:1px solid darkgray;overflow-y:auto"></div>
                <div id=selected_people style="display:none;flex-direction:column;min-width:100px;max-width:100px;overflow:hidden;background-color:white;border:1px solid darkgray;border-left:0px;margin-left:auto">
                    <div style="height:24px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid darkgray">
                        <!-- <div style="position:relative;float:left;margin:2px;padding:2px;color:red">선택 : <span id=selected_people_cnt>0</span></div>
                        <div id=remove_selected_people style="position:relative;float:right;padding:4px"><img src="/img/gray_close.png" class=coImg16 /></div>  -->
                        <div style="color:red;margin-left:3px">선택 : <span id=selected_people_cnt>0</span></div>
                        <img id=remove_selected_people src="/img/gray_close.png" style="margin-right:3px" class=coImg16 />
                    </div>
                    <div id=select_people_sub style="overflow:auto"></div>
                </div>
            </div>
            <div id=fr_chat class=coFrList style="flex:1;display:none">
                <div id=list_chat style="position:relative;width:100%;background-color:white;border:1px solid darkgray;overflow-y:auto"></div>
            </div>
            <div id=fr_setting style="flex:1;display:none;flex-direction:column;background-color:white;border:1px solid darkgray;overflow:auto;margin:10px 5px 0px 5px">
                <div class=coSettingRow style="border-bottom:2px solid darkgray;padding-bottom:15px">
                    <div class=coSettingLabel>
                        <div style="width:64px;height:64px;display:flex;align-items:center;justify-content:center;border:1px solid darkgray">
                            <img id=img_pict style="width:100%;height:100%" />
                        </div>
                    </div>
                    <div style="display:flex;align-items:flex-end;justify-content:flex-start;cursor:pointer">
                        <div id=pict_browse class='picBtn mq_text'>찾기</div>
                        <div id=pict_upload class='picBtn mq_text' style="margin-left:10px">저장</div>
                        <div id=pict_delete class='picBtn mq_text' style="margin-left:10px">삭제</div>
                        <div id=btn_reset_auth class='picBtn mq_text' style="display:none;margin-left:20px">Reset Authentication</div>
                        <input id=file_upload type=file accept="image/*" style="display:none">
                    </div>
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>별칭/상태</div>
                    <input id=in_nicknm data-role=none spellcheck=false placeholder='100 bytes. Emoji accepted.' style="flex-grow:1;border:1px solid darkgray" />
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>직무</div>
                    <input id=in_job data-role=none spellcheck=false placeholder='50 bytes' style="flex-grow:1;border:1px solid darkgray" />
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>부재코드</div>
                    <input id=in_abcd data-role=none spellcheck=false placeholder='8 bytes. eg) biztrip, dayoff' style="width:200px;border:1px solid darkgray" />
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>부재내용</div>
                    <input id=in_abnm data-role=none spellcheck=false placeholder='50 bytes. eg) 08/15~08/23' style="width:200px;border:1px solid darkgray" />
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>시작시<br>(Web)</div>
                    <label for=chk_standalone class=coSettingWrap>
                        <input type=checkbox id=chk_standalone name=chk_standalone class=coSettingChkbox />
                        <span class='coSettingSpan mq_node'>Run standalone</span>
                    </label>
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>알림 On/Off</div>
                    <label for=chk_notioff class=coSettingWrap>
                        <input type=checkbox id=chk_notioff name=chk_notioff class=coSettingChkbox />
                        <span class='coSettingSpan mq_node'>모두 끄기</span>
                    </label>
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>알림음<br>(Mobile)</div>
                    <label for=chk_soundoff class=coSettingWrap>
                        <input type=checkbox id=chk_soundoff name=chk_soundoff class=coSettingChkbox />
                        <span class='coSettingSpan mq_node'>Off (진동 유지)</span>
                    </label>
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>알림음<br>(Mobile)</div>
                    <input id=in_fr data-role=none spellcheck=false placeholder='0900' style="width:60px;text-align:center;border:1px solid darkgray;margin-right:3px" /> ~
                    <input id=in_to data-role=none spellcheck=false placeholder='1800' style="width:60px;text-align:center;border:1px solid darkgray;margin-left:3px" />
                    <span id=spn_clear class='coSettingSpan mq_node' style="color:#0082AD;cursor:pointer">Clear</span>
                </div>
                <div class=coSettingRow>
                    <div class='coSettingLabel mq_node'>알림표시</div>
                    <label for=chk_bodyoff class=coSettingWrap>
                        <input type=checkbox id=chk_bodyoff name=chk_bodyoff class=coSettingChkbox />
                        <span class='coSettingSpan mq_node'>내용 숨김</span>
                    </label>
                </div>
                <div class=coSettingRow>     
                    <div class='coSettingLabel mq_node'>알림표시</div>
                    <label for=chk_senderoff class=coSettingWrap>
                        <input type=checkbox id=chk_senderoff name=chk_senderoff class=coSettingChkbox />
                        <span class='coSettingSpan mq_node'>발신자 숨김</span>
                    </label>
                </div>
                <div class=coSettingRow>  
                    <div class='coSettingLabel mq_node'>Log File<br>(Mobile)</div>
                    <input id=in_showlog type=number data-role=none spellcheck=false value="0" style="width:30px;text-align:center;border:1px solid darkgray;margin:0px 5px" />
                    <div id=btn_showlog class='picBtn mq_node' style="background:lightgray;margin-left:5px">ShowLog</div>
                    <div id=btn_deletelog class='picBtn mq_node' style="background:lightgray;margin-left:5px">DelLog</div>
                </div>            
            </div>
            <div class=coMenuBottom>
                <div id=btn_new class="coMenuBtn people chat" style="display:none"><img src="/img/white_chat.png" class=coImgMenu /><span class=mq_text>새채팅</span></div>
                <div id=btn_me class="coMenuBtn people" style="display:none"><img src="/img/white_chattome.png" class=coImgMenu /><span class=mq_text>나에게</span></div>
                <div id=btn_read class="coMenuBtn chat" style="display:none"><img src="/img/white_read.png" class=coImgMenu /><span class=mq_text>읽음</span></div>
                <div id=btn_noti class="coMenuBtn chat" style="display:none"><img src="/img/white_notify.png" class=coImgMenu /><span class=mq_text>알림</span></div>
                <div id=btn_exit class="coMenuBtn chat" style="display:none"><img src="/img/white_exit.png" class=coImgMenu /><span class=mq_text>퇴장</span></div>
                <div id=btn_ok class="coMenuBtn setting" style="display:none"><img src="/img/white_yes.png" class=coImgMenu /><span class=mq_text>확인</span></div>
                <div id=btn_cancel class="coMenuBtn setting" style="display:none"><img src="/img/white_no.png" class=coImgMenu /><span class=mq_text>취소</span></div>
            </div>
        </div>
    </body>
</html>
